"use strict";!function(){function s(c,i){return new Promise(function(o,r){c("get","/classes/Counter?where="+encodeURIComponent(JSON.stringify({target:i}))).then(function(e){return e.json()}).then(function(e){var t=e.results,n=e.code,e=e.error;if(401===n)throw e;t&&0<t.length?(n=t[0],o(n)):c("post","/classes/Counter",{target:i,time:0}).then(function(e){return e.json()}).then(function(e,t){if(t)throw t;o(e)}).catch(function(e){console.error("Failed to create",e),r(e)})}).catch(function(e){console.error("LeanCloud Counter Error:",e),r(e)})})}function a(e){return{method:"PUT",path:"/1.1/classes/Counter/".concat(e),body:{time:{__op:"Increment",amount:1}}}}function e(t){var e="localhost"!==window.location.hostname,n=[],r=[],o=document.querySelector("#leancloud-site-pv-container"),c=((o||e)&&(u=s(t,"site-pv").then(function(e){r.push(a(e.objectId));var t=document.querySelector("#leancloud-site-pv");t&&(t.innerText=e.time+1,o)&&(o.style.display="inline")}),n.push(u)),document.querySelector("#leancloud-site-uv-container")),i=((c||e)&&(u=s(t,"site-uv").then(function(e){n="LeanCloud_UV_Flag";var t=!((t=localStorage.getItem(n))&&(new Date).getTime()-parseInt(t)<=864e5||(localStorage.setItem(n,(new Date).getTime().toString()),0)),n=(t&&r.push(a(e.objectId)),document.querySelector("#leancloud-site-uv"));n&&(n.innerText=e.time+(t?1:0),c)&&(c.style.display="inline")}),n.push(u)),document.querySelector("#leancloud-post-views-container")),u=window.location.pathname;(i||e)&&(u=decodeURI(u),u=s(t,u).then(function(e){var t;r.push(a(e.objectId)),i&&(t=document.querySelector("#leancloud-post-views"))&&(t.innerText=(e.time||0)+1,i.style.display="inline")}),n.push(u)),e&&Promise.all(n).then(function(){var e,o;0<r.length&&(e=t,o=r,new Promise(function(t,n){e("post","/batch",{requests:o}).then(function(e){if((e=e.json()).error)throw e.error;t(e)}).catch(function(e){console.error("Failed to save visitor count",e),n(e)})}))})}var r="ff9ecs9BxakKcRRi4v9SSeug-MdYXbMMI";function t(o){e(function(e,t,n){return fetch("".concat(o,"/1.1").concat(t),{method:e,headers:{"X-LC-Id":r,"X-LC-Key":"KdlU7L2QzLcUuHYgA7M64GOc","Content-Type":"application/json"},body:JSON.stringify(n)})})}var n="https://visit.qzkyl.ml";t(n)}();